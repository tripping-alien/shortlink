<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shortlinks.art - URL Shortener</title>

<!-- Google SEO -->
<meta name="description" content="Fast and simple URL shortener. Generate short links instantly.">
<meta name="keywords" content="shorten url, link shortener, short links, fast links">
<meta name="author" content="Shortlinks.art">
<link rel="canonical" href="https://shortlinks.art/">

<!-- Adsense Auto Ads -->
<script data-ad-client="pub-6170587092427912" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<style>
/* copy your CSS from the all-in-one file here */
</style>
</head>
<body>

<div class="container">
  <h1>Shortlinks.art</h1>
  <input type="url" id="longUrl" placeholder="Enter your URL here">
  <select id="ttl">
    <option value="1h">1 Hour</option>
    <option value="24h" selected>24 Hours</option>
    <option value="1w">1 Week</option>
    <option value="never">Never</option>
  </select>
  <input type="text" id="customCode" placeholder="Custom code (optional)">
  <button id="shortenBtn">Shorten</button>

  <div id="result" style="display:none;">
    <div class="short-link">
      <span id="shortUrl"></span>
      <button class="copy-btn" id="copyBtn">Copy</button>
    </div>
  </div>
</div>

<script>
const shortenBtn = document.getElementById("shortenBtn");
const resultDiv = document.getElementById("result");
const shortUrlSpan = document.getElementById("shortUrl");
const copyBtn = document.getElementById("copyBtn");

shortenBtn.addEventListener("click", async () => {
    const longUrl = document.getElementById("longUrl").value.trim();
    const ttl = document.getElementById("ttl").value;
    const customCode = document.getElementById("customCode").value.trim() || undefined;

    if (!longUrl) {
        alert("Please enter a URL.");
        return;
    }

    try {
        const res = await fetch("/api/v1/links", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({long_url: longUrl, ttl: ttl, custom_code: customCode})
        });
        const data = await res.json();
        if (res.ok) {
            shortUrlSpan.textContent = data.short_url;
            resultDiv.style.display = "block";
        } else {
            alert(data.detail || "Error creating short link");
        }
    } catch (err) {
        console.error(err);
        alert("Failed to connect to the server. Try again later.");
    }
});

copyBtn.addEventListener("click", () => {
    navigator.clipboard.writeText(shortUrlSpan.textContent)
      .then(() => alert("Copied!"))
      .catch(() => alert("Failed to copy."));
});
</script>

</body>
</html>
