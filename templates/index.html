<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Free URL Shortener with Link Previews & Expiring Links - Shortlinks.art</title>
    <meta name="description" content="Create free short links with previews. Shortlinks.art is a fast, simple URL shortener that offers custom expiration times and link previews.">
    <meta name="keywords" content="url shortener, link shortener, free url shortener, url shortener with preview, link shortener with preview, custom short link, expiring links, temporary links, short url, shorten link, fast url shortener, simple url shortener, shortlinks.art">
    
    <link rel="canonical" href="https://shortlinks.art/" />
    <meta name="robots" content="index, follow">
    
    <meta name="google-site-verification" content="YOUR_GOOGLE_CODE_HERE" />
    <meta name="msvalidate.01" content="YOUR_BING_CODE_HERE" />
    <meta name="yandex-verification" content="YOUR_YANDEX_CODE_HERE" />

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://shortlinks.art/">
    <meta property="og:title" content="Free URL Shortener with Link Previews - Shortlinks.art">
    <meta property="og:description" content="A fast, free, and simple URL shortener with link previews and custom expiration times.">
    <meta property="og:image" content="https://shortlinks.art/assets/social-preview.jpg"> 

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://shortlinks.art/">
    <meta property="twitter:title" content="Free URL Shortener with Link Previews - Shortlinks.art">
    <meta property="twitter:description" content="A fast, free, and simple URL shortener with link previews and custom expiration times.">
    <meta property="twitter:image" content="https://shortlinks.art/assets/social-preview.jpg">

    {{ ADSENSE_SCRIPT|safe }} 

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
    
</head>
<body>
    <div class="container">
      <h1>Shortlinks<span>.art</span></h1>
      
      <p class="tagline">A fast, simple URL shortener with link previews.</p>
      
      <input type="url" id="longUrl" placeholder="Enter your URL here">
      <select id="ttl">
        <option value="1h">1 Hour</option>
        <option value="24h" selected>24 Hours</option>
        <option value="1w">1 Week</option>
        <option value="never">Never</option>
      </select>

      <a href="#" class="advanced-options-toggle" id="advanced-toggle">Advanced Options <span>+</span></a>
      <div id="advanced-options">
          <input type="text" id="customCode" placeholder="Custom code (optional)">
          <input type="text" id="utmTags" placeholder="UTM tags (e.g., utm_source=twitter)">
      </div>
      
      <div id="error-msg"></div>
      
      <button id="shortenBtn">
          <span class="btn-text">Shorten</span>
          <div class="spinner"></div>
      </button>
      
      <div id="result">
        
        <div class="result-item">
          <span>Short Link</span>
          <div>
            <a href="#" id="shortUrlLink" target="_blank" rel="noopener noreferrer"></a>
            <button class="copy-btn" id="copyBtn">Copy</button>
          </div>
        </div>

        <div class="result-item">
            <span>Stats Page</span>
            <a href="#" id="statsUrlLink" target="_blank" rel="noopener noreferrer">View Clicks</a>
        </div>

        <div id="qr-code-box">
            <img id="qrCode" src="" alt="QR Code">
        </div>

        <div id="delete-link-box">
            <p><strong>Save this link!</strong> This is your unique deletion link. Keep it safe if you ever want to remove your shortlink.</p>
            <a href="#" id="deleteUrlLink" target="_blank"></a>
        </div>
      </div>
    </div>

    <script>
    const shortenBtn = document.getElementById("shortenBtn");
    const resultDiv = document.getElementById("result");
    const errorDiv = document.getElementById("error-msg");
    
    const shortUrlLink = document.getElementById("shortUrlLink");
    const copyBtn = document.getElementById("copyBtn");
    const statsUrlLink = document.getElementById("statsUrlLink");
    const qrCodeImg = document.getElementById("qrCode");
    const deleteUrlLink = document.getElementById("deleteUrlLink");

    // NEW: Advanced Options Elements
    const advancedToggle = document.getElementById("advanced-toggle");
    const advancedOptionsDiv = document.getElementById("advanced-options");

    const TEXT_ENTER_URL = "Please enter a URL.";
    const TEXT_ERROR = "Error creating short link";
    const TEXT_ERROR_SERVER = "Failed to connect to the server.";
    const TEXT_SHORTENING = "Shortening...";
    const TEXT_SHORTEN = "Shorten";
    const TEXT_COPIED = "Copied!";
    const TEXT_COPY = "Copy";
    const TEXT_FAILED = "Failed!";

    // NEW: Toggle advanced options
    advancedToggle.addEventListener("click", (e) => {
        e.preventDefault();
        const isShown = advancedOptionsDiv.classList.toggle("show");
        advancedToggle.querySelector("span").textContent = isShown ? "âˆ’" : "+";
    });

    shortenBtn.addEventListener("click", async () => {
        const longUrl = document.getElementById("longUrl").value.trim();
        const ttl = document.getElementById("ttl").value;
        // NEW: Get advanced values
        const customCode = document.getElementById("customCode").value.trim() || undefined;
        const utmTags = document.getElementById("utmTags").value.trim() || undefined;
        
        errorDiv.style.display = "none";
        errorDiv.textContent = "";
        resultDiv.classList.remove("show");

        if (!longUrl) {
            errorDiv.textContent = TEXT_ENTER_URL;
            errorDiv.style.display = "block";
            return;
        }
        
        shortenBtn.disabled = true;
        shortenBtn.classList.add("loading");

        try {
            const res = await fetch("/api/v1/links", {
                method:"POST",
                headers:{"Content-Type":"application/json"},
                // NEW: Send advanced values in payload
                body: JSON.stringify({
                    long_url: longUrl, 
                    ttl: ttl, 
                    custom_code: customCode, 
                    utm_tags: utmTags 
                })
            });
            const data = await res.json();
            
            if (res.ok) {
                shortUrlLink.href = data.short_url;
                shortUrlLink.textContent = data.short_url.replace("https://", "");
                
                statsUrlLink.href = data.stats_url;
                deleteUrlLink.href = data.delete_url;
                deleteUrlLink.textContent = data.delete_url;
                qrCodeImg.src = data.qr_code_data;
                
                resultDiv.classList.add("show");
            } else {
                errorDiv.textContent = data.detail || TEXT_ERROR;
                errorDiv.style.display = "block";
            }
        } catch(err) {
            console.error(err);
            errorDiv.textContent = TEXT_ERROR_SERVER;
            errorDiv.style.display = "block";
        } finally {
            shortenBtn.disabled = false;
            shortenBtn.classList.remove("loading");
        }
    });

    copyBtn.addEventListener("click", () => {
        navigator.clipboard.writeText(shortUrlLink.href)
            .then(() => {
                copyBtn.textContent = TEXT_COPIED;
                copyBtn.disabled = true;
                setTimeout(() => {
                    copyBtn.textContent = TEXT_COPY;
                    copyBtn.disabled = false;
                }, 2000);
            })
            .catch(() => {
                copyBtn.textContent = TEXT_FAILED;
                copyBtn.disabled = true;
                 setTimeout(() => {
                    copyBtn.textContent = TEXT_COPY;
                    copyBtn.disabled = false;
                }, 2000);
            });
    });
    </script>
</body>
</html>
